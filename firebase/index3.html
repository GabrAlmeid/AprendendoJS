<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Firebase</title>
    <link rel="stylesheet" href="style.css" type="text/css">
</head>

<body>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-firestore.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-auth.js"></script>
    <script>
        const firebaseConfig = {
            apiKey: "AIzaSyDpye_KQEU2wlBVmv6ndCANXeJHmWg1ixI",
            authDomain: "colegio-2d374.firebaseapp.com",
            projectId: "colegio-2d374",
            storageBucket: "colegio-2d374.appspot.com",
            messagingSenderId: "120708773033",
            appId: "1:120708773033:web:6fef0e6d311247536ba5b8",
            measurementId: "G-3N2DFQW3RT"
        };

        firebase.initializeApp(firebaseConfig)
        const db = firebase.firestore()
        let auth = firebase.auth()

        // function criarUsuario() {

        //     let newUserEmail = "novoteste@email.com";
        //     let newUserPassword = "123456";

        //     let auth = firebase.auth()

        //     auth.createUserWithEmailAndPassword(newUserEmail, newUserPassword)
        //         .then(user => {
        //             console.log(user);
        //         }).catch(error => {
        //             console.log(error);
        //         })
        // }

        function login() {
            let userEmail = "novoteste@email.com";
            let userPassword = "123456";

            auth.setPersistence(firebase.auth.Auth.Persistence.SESSION).then(() => {
                auth.signInWithEmailAndPassword(userEmail, userPassword)
            .then(loggedUser =>{
                console.log(auth.currentUser);
            }).catch(error =>{
                console.log(error);
            })
            }).catch(error =>{
                console.log(error)
            })

            
        }
        // login();

        let user = auth.currentUser;
        

        auth.onAuthStateChanged(user =>{
            if(user){
                console.log(user)
            }else{
                console.log("NinguÃ©m logado");
            }
        })

        function logout(){
            auth.signOut().then(() =>{
                console.log("usuario foi deslogado")
            }).catch(error =>{
                console.log(error)
            })
        }

        setTimeout(login, 2000)



    </script>
</body>

</html>